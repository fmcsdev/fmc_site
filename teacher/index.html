<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è¬›å¸«ãƒšãƒ¼ã‚¸ | FMC å¤šå›½èªä¼šè©±æ•™å®¤</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../assets/styles.css?v=7">
</head>
<body class="bg-white text-slate-800">

  <!-- Header -->
  <header class="sticky top-0 z-40 bg-indigo-600 text-white shadow-md">
    <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center">
      <h1 class="font-bold text-lg">FMC è¬›å¸«ãƒšãƒ¼ã‚¸</h1>
      <button id="logoutBtn" class="px-3 py-1 bg-white text-indigo-600 rounded hover:bg-indigo-100">
        ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
      </button>
    </div>
  </header>

  <!-- Main -->
  <main class="max-w-4xl mx-auto px-4 py-10">
    <h2 class="text-2xl font-bold mb-4">ã‚ˆã†ã“ãã€è¬›å¸«ã®çš†æ§˜ã¸ ğŸ‘©â€ğŸ«</h2>
    <p class="text-slate-600 mb-6">
      ã“ã‚Œã¯ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ã§ã™ã€‚ãƒ­ã‚°ã‚¤ãƒ³ãŒæˆåŠŸã—ãŸå ´åˆã®ã¿è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
    </p>

    <div id="userInfo" class="border p-4 rounded bg-slate-50 text-sm"></div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const SUPABASE_URL  = "https://dsbvgomhugvjruqykbmr.supabase.co";
    const SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzYnZnb21odWd2anJ1cXlrYm1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4NzIwNzksImV4cCI6MjA3ODQ0ODA3OX0.FHX45XbBfpeNtnnCLc9wvoyxOM6w2vIIjOcIZWfb-_I";

    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON);

    async function loadUser() {
      const { data: { user } } = await supabase.auth.getUser();
      const infoDiv = document.getElementById("userInfo");

      if (!user) {
        infoDiv.innerHTML = `<p class="text-red-600">ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<a href="../login.html" class="underline">ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹</a></p>`;
        return;
      }

      infoDiv.innerHTML = `
        <p><strong>ãƒ¦ãƒ¼ã‚¶ãƒ¼ID:</strong> ${user.id}</p>
        <p><strong>ãƒ¡ãƒ¼ãƒ«:</strong> ${user.email}</p>
        <p><strong>ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ!</strong> ãƒ­ãƒ¼ãƒ«: è¬›å¸«</p>
      `;
    }

    document.getElementById("logoutBtn").addEventListener("click", async () => {
      await supabase.auth.signOut();
      window.location.href = "../login.html";
    });

    loadUser();
  </script>
</body>
</html>
